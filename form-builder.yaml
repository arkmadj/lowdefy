id: form-builder-editor-page
type: PageSiderMenu
properties:
  title: Form Builder
layout:
  contentJustify: center
  contentGutter: 16


requests:
  - id: insert_new_form
    type:  MongoDBInsertOne
    connectionId: form_db
    properties:
      doc:
        title:
          _state: form_title
        description:
          _state: form_description
        questions:
          _state: questions


blocks:
  - id: form_header_card
    type: Card
    layout:
      size: 1200
      contentGutter: 16
    blocks:
      - id: form_title
        type: TitleInput
        value: Untited form
      - id: form_description
        type: ParagraphInput
        value: Form description
  - id: questions
    type: List
    layout:
      contentGutter: 16
    blocks:
      - id: questions.$.id
        type: Card
        layout:
          size: 1200
          contentGutter: 16
        blocks:
          - id: main_box
            type: Box
            layout:
              contentGutter: 35
            blocks:
              - id: questions.$.id + question_box
                type: Box
                layout:
                  contentGutter: 25
                  span: 14
                blocks:
                  - id: questions.$.question
                    type: TextInput
                    properties:
                      placeholder: Question
                      label:
                        disabled: true
                  - id: answer_block
                    type: Box
                    layout:
                      contentGutter: 12
                    blocks:

                    # TYPE: TEXT
                    - id: answer_text_container
                      type: Box
                      visible:
                        _eq:
                          - _state: questions.$ + type_input
                          - "text"
                      layout:
                        contentGutter: 6
                      blocks:
                        - id: answer_text_box
                          type: Box
                          layout:
                            contentAlign: middle
                            contentGutter: 6
                          blocks:
                            - id: answer_text
                              type: TextInput
                              properties:
                                placeholder: Text answer
                                label:
                                  disabled: true
                    
                    # TYPE: CHECKBOX
                    - id: answer_checkbox_container
                      type: Box
                      visible:
                        _eq:
                          - _state: questions.$ + type_input
                          - "check_box"
                      layout:
                        contentGutter: 6
                      blocks:
                        - id: answer_checkbox_box
                          type: Box
                          layout:
                            contentAlign: middle
                            contentGutter: 6
                          blocks:
                            - id: questions.$.check_options
                              type: List
                              layout:
                                contentGutter: 16
                              blocks:
                                - id: answer_checkbox
                                  type: CheckboxSelector
                                  layout:
                                    flex: 0 1 auto
                                  properties:
                                    disabled: true
                                    options:
                                      - label: ''
                                    label:
                                      disabled: true
                                - id: questions.$.check_options.$.label
                                  type: TextInput
                                  layout: 
                                    flex: 1 1 auto
                                  properties:
                                    placeholder: Option 1
                                    label:
                                      disabled: true
                                - id: answer_checkbox_remove_icon
                                  type: Icon
                                  layout: 
                                    flex: 0 1 auto
                                  properties:
                                    name: CloseCircleFilled
                                    size: 20
                        - id: answer_radio_footer
                          type: Box
                          layout:
                            contentGutter: 6
                          blocks:
                          - id: add_answer_radio_option
                            type: Button
                            layout:
                              span: 8
                            properties:
                              color: "#1890ff"
                              block: true
                              title: Add Option
                            events:
                              onClick:
                                - id: add_to_check_options
                                  type: JsAction
                                  params:
                                    name: add_option
                                    args:
                                      - _state: questions.$.check_options
                                      - _state: type_input
                                - id: set_check_option
                                  type: SetState
                                  params:
                                    questions.$.check_options:
                                      _actions: add_to_check_options.response
                          - id: add_other_option
                            type: Button
                            layout:
                              span: 8
                            properties:
                              color: "#1890ff"
                              block: true
                              title: Add Other
                    
                    # TYPE: RADIO
                    - id: answer_radio_container
                      type: Box
                      visible: 
                        _eq:
                          - _state: questions.$ + type_input
                          - "radio_button"
                      layout:
                        contentGutter: 6
                      blocks:
                        - id: answer_radio_box
                          type: Box
                          layout:
                            contentAlign: middle
                            contentGutter: 6
                          blocks:
                          - id: questions.$.radio_options
                            type: List
                            layout:
                              contentGutter: 16
                            blocks:
                              - id: answer_radio
                                type: RadioSelector
                                layout:
                                  flex: 0 1 auto
                                properties:
                                  disabled: true
                                  options:
                                    - label: ''
                                  label:
                                    disabled: true
                              - id: questions.$.radio_options.$.label
                                type: TextInput
                                layout: 
                                  flex: 1 1 auto
                                properties:
                                  placeholder: Enter option
                                  label:
                                    disabled: true
                              - id: answer_radio_remove_icon
                                type: Icon
                                layout: 
                                  flex: 0 1 auto
                                properties:
                                  name: CloseCircleFilled
                                  size: 20
                        - id: answer_radio_footer
                          type: Box
                          layout:
                            contentGutter: 6
                          blocks:
                          - id: add_answer_radio_option
                            type: Button
                            layout:
                              span: 8
                            properties:
                              color: "#1890ff"
                              block: true
                              title: Add Option
                            events:
                              onClick:
                                - id: add_to_radio_options
                                  type: JsAction
                                  params:
                                    name: add_option
                                    args:
                                      - _state: questions.$.radio_options
                                      - _state: type_input
                                - id: set_radio_option
                                  type: SetState
                                  params:
                                    questions.$.radio_options:
                                      _actions: add_to_radio_options.response
                          - id: add_other_option
                            type: Button
                            layout:
                              span: 8
                            properties:
                              color: "#1890ff"
                              block: true
                              title: Add Other

                    # TYPE FILE UPLOAD
                    - id: shop_photo_upload_button
                      type: Button
                      layout:
                        span: 24
                      visible: 
                        _eq:
                          - _state: questions.$ + type_input
                          - "file"
                      properties:
                        color: "#AAAAAA"
                        block: true
                        title: Upload
              - id: type_box
                type: Box
                layout:
                  contentGutter: 25
                  span: 10
                blocks:
                  - id: questions.$ + type_input
                    type: Selector
                    properties:
                      placeholder: Question Type
                      options:
                        - label: Text
                          value: "text"
                        - label: File Upload
                          value: file_upload
                        - label: Radio Button
                          value: radio_button
                        - label: Check Box
                          value: check_box
                        - label: Dropdown List
                          value: dropdown_list
                      label:
                        disabled: true
                    events:
                      onChange:
                        - id: set_type
                          type: SetState
                          params:
                            questions.$.type:
                              _state: questions.$ + type_input
                            
          - id: card_divider
            type: Divider
          - id: footer_box
            type: Box
            layout:
              contentAlign: middle
            blocks:
              - id: right_box
                type: Box
                layout:
                  flex: 1 1 auto
                blocks:
                  - id: questions.$.exclude
                    type: CheckboxSelector
                    properties:
                      options:
                        - label: BA
                          value: ba
                        - label: Customer
                          value: customer
                      label:
                        inline: true
                        title: Exclude
              - id: left_box
                type: Box
                layout:
                  contentAlign: middle
                  # contentGutter: 16
                  flex: 0 1 auto
                  # span: 6
                blocks:
                  - id: questions.$.required
                    type: Switch
                    layout:
                      flex: 0 1 auto
                    properties:
                      label:
                        colon: false
                        inline: true
                      title: Required
                  - id: block_divider
                    type: Divider
                    properties:
                      layout:
                        flex: 0 1 auto
                      type: vertical
                    layout:
                      span: 2
                  - id: block_id
                    type: Icon
                    layout:
                      flex: 0 1 auto
                      align: center
                    properties:
                      color: '#595959'
                      name: DeleteFilled
                      size: 20
                    # events:
                    #   onClick:
                    #     - id: remove_question
                    #       type: JsAction
                    #       params:
                    #         name: remove
                    #         args:
                    #           - _state: questions
                    #           - _state: questions.$.id
                    #     - id: set_deleted_state
                    #       type: SetState
                    #       params:
                    #         questions:
                    #           - _actions: remove_question.response
  - id: bottom_buttons
    type: Box
    layout:
      size: 1200
    blocks:
      - id: left_bottom_box
        type: Box
        layout:
          flex: 1 1 auto
          contentGutter: 16
        blocks:
          - id: add_button
            type: Button
            layout:
              span: 5
            properties:
              color: "#478B5F"
              title: Add
              size: large
              block: true
            events:
              onClick:
                - id: add_question_object
                  type: JsAction
                  params:
                    name: create
                    args:
                      - _state: questions
                - id: add_question
                  type: SetState
                  params:
                    questions:
                      _actions: add_question_object.response
      - id: right_bottom_box
        type: Box
        layout:
          # flex: 1 1 auto
          span: 6
          contentGutter: 5
        blocks:
          - id: save
            type: Button
            layout:
              # span: 20
              flex: 1 1 auto
            properties:
              color: "#478B5F"
              title: Save
              size: large
              block: true
            events:
              onClick:
                - id: create_form_object
                  type: JsAction
                  params:
                    name: create_form
                    args:
                      - _state: form_title
                      - _state: form_description
                      - _state: questions
                - id: save_question
                  type: SetState
                  params:
                    questions:
                      _actions: create_form_object.response
                - id: save
                  type: Request
                  params: insert_new_form
          - id: publish
            type: Button
            layout:
              # span: 20
              # span: 5
              flex: 1 1 auto
            properties:
              color: "#478B5F"
              title: Publish
              size: large
              block: true


